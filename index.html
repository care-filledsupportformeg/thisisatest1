<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NA Recovery Resources</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0; /* Ensure no default body margin */
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Styles for injected HTML step content */
        .step-html-content .card {
            background-color: #ffffff;
            border-radius: 0.75rem; /* 12px */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            margin-bottom: 1.5rem; /* 24px */
            overflow: hidden; /* To contain border radius of header */
        }
        .step-html-content .card-header {
            background-color: #7dd3fc; /* Lighter sky blue for card headers */
            color: #0c4a6e; /* Darker sky blue text */
            padding: 1rem 1.5rem; /* 16px 24px */
            border-bottom: 1px solid #bae6fd; /* Even lighter border */
        }
        .step-html-content .card-content {
            padding: 1.5rem; /* 24px */
            color: #374151; /* Gray 700 */
        }
        .step-html-content .card-content ul {
            list-style-type: disc;
            padding-left: 1.5rem; /* 24px */
            margin-top: 0.5rem; /* 8px */
        }
        .step-html-content .card-content li {
            margin-bottom: 0.5rem; /* 8px */
        }
        .step-html-content .highlight {
            color: #0369a1; /* Sky blue 700 */
            font-weight: 600;
        }
        .step-html-content .emphasis {
            font-style: italic;
            color: #0ea5e9; /* Sky blue 500 */
        }
        .step-html-content .key-themes-card {
            background-color: #f0f9ff; /* Very light blue, almost white */
            border: 2px solid #7dd3fc;
        }
        .step-html-content .key-themes-header { /* This is a .card-header inside .key-themes-card */
            background-color: #38bdf8 !important; /* Sky blue 400 - !important to ensure override if needed */
            color: white !important;
        }
        .step-html-content .key-themes-card .card-header h3 { /* Ensure text color is white for key themes header */
             color: white !important;
        }
         .step-html-content .key-themes-card .text-sky-700 { /* Titles within key themes card */
            color: #0369a1; /* Sky blue 700, consistent with highlight */
        }

        /* General prose styles for other pages */
        .prose h3 {
          font-size: 1.5em; /* 24px */
          font-weight: 600;
          margin-top: 1.5em;
          margin-bottom: 0.75em;
          color: #0c4a6e; /* sky-800 */
        }
        .prose p {
          margin-bottom: 1em;
          line-height: 1.6;
        }
        .prose ol {
          list-style-type: decimal;
          margin-left: 1.5em;
          margin-bottom: 1em;
        }
        .prose ol li {
          margin-bottom: 0.5em;
        }
        .line-clamp-3 {
          display: -webkit-box;
          -webkit-line-clamp: 3;
          -webkit-box-orient: vertical;  
          overflow: hidden;
        }

        /* JFT Page Specific Styles */
        .jft-card {
            background-color: #ffffff;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            margin-top: 2rem;
            padding: 2rem;
        }
        .jft-date {
            font-size: 1.5rem;
            font-weight: 600;
            color: #0369a1; /* Sky blue 700 */
            margin-bottom: 0.5rem;
        }
        .jft-title {
            font-size: 2rem;
            font-weight: 700;
            color: #0c4a6e; /* Sky blue 800 */
            margin-bottom: 1rem;
        }
        .jft-quote {
            font-style: italic;
            color: #374151; /* Gray 700 */
            margin-bottom: 1rem;
            padding-left: 1rem;
            border-left: 3px solid #7dd3fc; /* Lighter sky blue */
        }
        .jft-quote-source {
            display: block;
            text-align: right;
            font-size: 0.9rem;
            color: #4b5563; /* Gray 600 */
            margin-top: 0.5rem;
        }
        .jft-meditation p {
            margin-bottom: 1rem;
            line-height: 1.7;
            color: #1f2937; /* Gray 800 */
        }
        .jft-affirmation {
            margin-top: 1.5rem;
            padding: 1rem;
            background-color: #f0f9ff; /* Sky 50 */
            border-left: 4px solid #0ea5e9; /* Sky 500 */
            color: #0c4a6e; /* Sky 800 */
            font-weight: 500;
        }

    </style>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">

// --- HTML Content for Each Step (existing content, truncated for brevity) ---
const step1HtmlContent = `
<div class="max-w-6xl mx-auto">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div class="card">
            <div class="card-header"><h3 class="text-xl font-semibold">Insights from the Basic Text</h3></div>
            <div class="card-content"><p class="mb-3">The Basic Text lays the foundation for recovery with Step One, emphasizing complete surrender.</p><ul><li><span class="highlight">Powerlessness:</span> This means an inability to control drug use...</li><li><span class="highlight">Unmanageability:</span> This refers to the chaos addiction brings...</li><li><span class="highlight">Nature of Addiction:</span> Addiction is presented as a disease...</li><li><span class="highlight">Identification as an Addict:</span> The text encourages honest self-assessment...</li><li><span class="highlight">Hitting Bottom:</span> For many, Step One comes after reaching a personal "bottom"...</li></ul><p class="mt-3 emphasis">The Basic Text stresses that this admission is the first step towards freedom and the beginning of hope.</p></div>
        </div>
        <div class="card">
            <div class="card-header"><h3 class="text-xl font-semibold">Insights from "It Works: How and Why"</h3></div>
            <div class="card-content"><p class="mb-3">"It Works: How and Why" explores the depth and implications of Step One.</p><ul><li><span class="highlight">Two-Fold Admission:</span> The step has two distinct but related parts...</li><li><span class="highlight">Reservations:</span> This book discusses common reservations addicts have...</li><li><span class="highlight">The "We":</span> The use of "We" signifies a shared experience...</li><li><span class="highlight">Surrender as Liberation:</span> Surrender in Step One is not defeat but liberation...</li><li><span class="highlight">Beyond Drugs:</span> While drugs are the initial focus...</li></ul><p class="mt-3 emphasis">This text highlights that a thorough and honest First Step is the bedrock upon which all other recovery is built.</p></div>
        </div>
        <div class="card">
            <div class="card-header"><h3 class="text-xl font-semibold">Insights from the Step Working Guides</h3></div>
            <div class="card-content"><p class="mb-3">The Step Working Guides offer practical questions for a personal understanding of Step One.</p><ul><li><span class="highlight">Personal Examples of Powerlessness:</span> Guides prompt reflection on specific instances...</li><li><span class="highlight">Evidence of Unmanageability:</span> Questions help individuals list concrete ways...</li><li><span class="highlight">Denial and Rationalization:</span> The guides encourage examination of past denial systems...</li><li><span class="highlight">The "Gift of Desperation":</span> Reflection on what brought the individual to NA...</li><li><span class="highlight">What "Addiction" Means Personally:</span> Exploring one's own understanding...</li></ul><p class="mt-3 emphasis">The guides aim to make Step One a deeply personal admission, not just an intellectual exercise.</p></div>
        </div>
    </div>
    <div class="card key-themes-card mt-8">
        <div class="card-header key-themes-header"><h3 class="text-2xl font-semibold text-center">Key Themes & Synthesis of Step One</h3></div>
        <div class="card-content"><p class="mb-4 text-lg">Step One is the cornerstone of the Narcotics Anonymous program...</p><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><h4 class="text-xl font-semibold text-sky-700 mb-2">1. Honesty and Admission</h4><p>The core of Step One is rigorous honesty...</p></div><div><h4 class="text-xl font-semibold text-sky-700 mb-2">2. Surrender and Acceptance</h4><p>This step involves surrendering the illusion of control...</p></div><div><h4 class="text-xl font-semibold text-sky-700 mb-2">3. The End of Isolation</h4><p>By admitting "We," individuals begin to break free...</p></div><div><h4 class="text-xl font-semibold text-sky-700 mb-2">4. Foundation for Hope</h4><p>While admitting defeat might seem negative...</p></div><div><h4 class="text-xl font-semibold text-sky-700 mb-2">5. Identification with the Disease</h4><p>Understanding and identifying with the concept of addiction...</p></div><div><h4 class="text-xl font-semibold text-sky-700 mb-2">6. Motivation for Change</h4><p>The pain and desperation recognized...</p></div></div><p class="mt-6 text-center text-lg font-medium text-sky-800">Step One is the courageous first act...</p></div>
    </div>
</div>`;
const step2HtmlContent = `<div>Step 2 Content...</div>`; // Placeholder
const step3HtmlContent = `<div>Step 3 Content...</div>`; // Placeholder
const step4HtmlContent = `<div>Step 4 Content...</div>`; // Placeholder
const step5HtmlContent = `<div>Step 5 Content...</div>`; // Placeholder
const step6HtmlContent = `<div>Step 6 Content...</div>`; // Placeholder
const step7HtmlContent = `<div>Step 7 Content...</div>`; // Placeholder
const step8HtmlContent = `<div>Step 8 Content...</div>`; // Placeholder
const step9HtmlContent = `<div>Step 9 Content...</div>`; // Placeholder
const step10HtmlContent = `<div>Step 10 Content...</div>`; // Placeholder
const step11HtmlContent = `<div>Step 11 Content...</div>`; // Placeholder
const step12HtmlContent = `<div>Step 12 Content...</div>`; // Placeholder

// --- Data for Pages (existing data) ---
const stepsData = [
  { id: 1, title: "Step One", text: "We admitted that we were powerless over our addiction, that our lives had become unmanageable.", summary: "This step is about honesty and acceptance...", userContentPlaceholder: step1HtmlContent },
  { id: 2, title: "Step Two", text: "We came to believe that a Power greater than ourselves could restore us to sanity.", summary: "Step Two introduces hope...", userContentPlaceholder: step2HtmlContent },
  { id: 3, title: "Step Three", text: "We made a decision to turn our will and our lives over to the care of God as we understood Him.", summary: "This step is about making a decision...", userContentPlaceholder: step3HtmlContent },
  { id: 4, title: "Step Four", text: "We made a searching and fearless moral inventory of ourselves.", summary: "Step Four is a process of self-examination...", userContentPlaceholder: step4HtmlContent },
  { id: 5, title: "Step Five", text: "We admitted to God, to ourselves, and to another human being the exact nature of our wrongs.", summary: "Following the self-inventory, Step Five involves sharing...", userContentPlaceholder: step5HtmlContent },
  { id: 6, title: "Step Six", text: "We were entirely ready to have God remove all these defects of character.", summary: "Step Six is about becoming willing...", userContentPlaceholder: step6HtmlContent },
  { id: 7, title: "Step Seven", text: "We humbly asked Him to remove our shortcomings.", summary: "This step involves actively asking...", userContentPlaceholder: step7HtmlContent },
  { id: 8, title: "Step Eight", text: "We made a list of all persons we had harmed and became willing to make amends to them all.", summary: "Step Eight begins the process...", userContentPlaceholder: step8HtmlContent },
  { id: 9, title: "Step Nine", text: "We made direct amends to such people wherever possible, except when to do so would injure them or others.", summary: "Step Nine is about taking action...", userContentPlaceholder: step9HtmlContent },
  { id: 10, title: "Step Ten", text: "We continued to take personal inventory and when we were wrong promptly admitted it.", summary: "Step Ten is about maintaining recovery...", userContentPlaceholder: step10HtmlContent },
  { id: 11, title: "Step Eleven", text: "We sought through prayer and meditation to improve our conscious contact with God as we understood Him, praying only for knowledge of His will for us and the power to carry that out.", summary: "This step focuses on deepening...", userContentPlaceholder: step11HtmlContent },
  { id: 12, title: "Step Twelve", text: "Having had a spiritual awakening as a result of these steps, we tried to carry this message to addicts and to practice these principles in all our affairs.", summary: "Step Twelve is about giving back...", userContentPlaceholder: step12HtmlContent }
];

const generalPagesData = {
  whatIsNA: { title: "What is the Narcotics Anonymous Program?", content: `<p class="mb-4">NA is a nonprofit Fellowship...</p><h3 class="text-2xl font-semibold mt-6 mb-3">Why Are We Here?</h3><p>Before coming to the Fellowship of NA...</p>` },
  traditions: { title: "The Twelve Traditions of NA", content: `<p class="mb-4">We keep what we have only with vigilance...</p><ol class="list-decimal list-inside space-y-2 mb-4"><li>Our common welfare should come first...</li></ol><p>Understanding these Traditions...</p>` },
  recoveryRelapse: { title: "Recovery and Relapse", content: `<p class="mb-4">Many people think that recovery is simply...</p><p>Relapses are often fatal...</p>` }
};

// --- JFT Readings Data ---
// This is a sample. A full implementation would have all 366 readings.
const jftReadingsData = {
  "JANUARY_1": {
    title: "Vigilance",
    quote: "We keep what we have only with vigilance...",
    quote_source: "Basic Text, p. 57",
    meditation: "How do we remain vigilant about our recovery? First, by realizing that we have a disease we will always have. No matter how long we've been clean, no matter how much better our lives have become, no matter what the extent of our spiritual healing, we are still addicts. Our disease waits patiently, ready to spring the trap if we give it the opportunity.\n\nVigilance is a daily accomplishment. We strive to be constantly alert and ready to deal with signs of trouble. Not that we should live in irrational fear that something horrible will possess us if we drop our guard for an instant; we just take normal precautions. Daily prayer, regular meeting attendance, and choosing not to compromise spiritual principles for the easier way are acts of vigilance. We take inventory as necessary, share with others whenever we are asked, and carefully nurture our recovery. Above all, we stay aware!\n\nWe have a daily reprieve from our addiction as long as we remain vigilant. Each day, we carry the principles of recovery into all we do, and each night, we thank our Higher Power for another day clean.",
    affirmation: "I will be vigilant, doing everything necessary to guard my recovery."
  },
  "JANUARY_2": {
    title: "Take a deep breath and talk to God",
    quote: "Sometimes when we pray, a remarkable thing happens: We find the means, ways, and energies to perform tasks far beyond our capacities.",
    quote_source: "Basic Text p. 44",
    meditation: "Coping successfully with life's minor annoyances and frustrations is sometimes the most difficult skill we have to learn in recovery. We are faced with small inconveniences daily. From untangling the knots in our children's shoelaces to standing in line at the market, our days are filled with minor difficulties that we must somehow deal with.\n\nIf we're not careful, we may find ourselves dealing with these difficulties by bullying our way through each problem or grinding our teeth while giving ourselves a stern lecture about how we should handle them. These are extreme examples of poor coping skills, but even if we're not this bad there's probably room for improvement.\n\nEach time life presents us with another little setback to our daily plans, we can simply take a deep breath and talk to the God of our understanding. Knowing we can draw patience, tolerance, or whatever we need from that Power, we find ourselves coping better and smiling more often.",
    affirmation: "I will take a deep breath and talk to my God whenever I feel frustrated."
  },
  // ... (many more readings would go here)
  "FEBRUARY_28": {
    title: "The greatest gift",
    quote: "Our newly found faith serves as a firm foundation for courage in the future.",
    quote_source: "Basic Text, p.93",
    meditation: "When we begin coming to meetings, we hear other addicts talking about the gifts they have received as a result of the program, things we never thought of as \"gifts\" before. One such \"gift\" is the renewed ability to feel the emotions we had deadened so long with drugs. It's not difficult to think of love, joy, and happiness as gifts, even if it's been a long time since we've felt them. But what about \"bad\" feelings like anger, sadness, fear, and loneliness? Such emotions can't be seen as gifts, we tell ourselves. After all, how can we be thankful for things we want to run from?\n\nWe can become grateful for these emotions in our lives if we place them in their proper perspective. We need to remember that we've come to believe in a loving Higher Power, and we've asked that Power to care for us-and our Higher Power doesn't make mistakes. The feelings we're given, \"good\" or \"bad\", are given to us for a reason. With this in mind, we come to realize there are no \"bad\" feelings, only lessons to be learned. Our faith and our Higher Power's care give us the courage we need to face whatever feelings may come up on a daily basis.\n\nAs we heard early in recovery, \"Your Higher Power won't give you more than you can handle in just one day.\" And the ability to feel our emotions is one of the greatest gifts of recovery.",
    affirmation: "I will try to welcome my feelings, firm in the belief that I have the courage to face whatever emotions may come up in my life."
  },
  "FEBRUARY_29": { // Example for Leap Day
    title: "Anything!",
    quote: "Our disease has been arrested, and now anything is possible. We become increasingly open-minded and open to new ideas in all areas of our lives.",
    quote_source: "Basic Text, p.102",
    meditation: "For many of us, our first few months or years in NA are a wonderful time. We're willing to try anything, and our eyes are constantly opened to new joys and new horizons. Finally freed from active addiction, our recovery young and fresh, anything seems possible.\n\nWith a little clean time under our belts, however, there may be less urgency to our program. We might be quite as willing as we once were to put to use the experience of others. We may have encountered a few seemingly intractable defects in our character, whittling away at the boundless optimism of our early recovery. We know too much to believe that anything is possible.\n\nHow do we restore enthusiasm to our recovery? We pray about it; we share about it; and we seek out the enthusiasm we are lacking. There are members-some with more time clean than ourselves, some with less-who have the enthusiasm we seek, and who will be happy to share it with us if we ask them to. To gain the benefit of their experience, however, we must practice open-mindedness and become teachable again. When we become open to new ideas and willing to try them out we'll find that, once more, anything seems possible.",
    affirmation: "There is always more to learn and someone to learn from in my recovery. Today, I will be open to new ideas and willing to try them out. As long as I am, I know that anything is possible."
  },
  "MAY_24": { // Reading for current date (May 24th)
    title: "Risking vulnerability",
    quote: "As we grow, we learn to overcome the tendency to run and hide from ourselves and our feelings.",
    quote_source: "Basic Text p.81",
    meditation: "Rather than risk vulnerability many of us have developed habits that keep others at a safe distance. These patterns of emotional isolation can give us the feeling we are hopelessly locked behind our masks. We used to take risks with our lives; now we can take risks with our feelings. Through sharing with other addicts, we learn that we are not unique; we do not make ourselves unduly vulnerable simply by letting others know who we are, for we are in good company. And by working the Twelve Steps of the NA program, we grow and change. We no longer want or need to hide our emerging selves. We are offered the opportunity to shed the emotional camouflage we developed to survive our active addiction.\n\nBy opening ourselves to others, we risk becoming vulnerable, but that risk is well worth the rewards. With the help of our sponsor and other recovering addicts, we learn how to express our feelings honestly and openly. In turn, we become nourished and encouraged by the unconditional love of our companion. As we practice spiritual principles, we find strength and freedom, both in ourselves and in those around us. We are set free to be ourselves and to enjoy the company of our fellow addict.",
    affirmation: "I will openly and honestly share with another recovering addict. I will risk becoming vulnerable and celebrate my self and my friendship with other NA members. I will grow."
  },
  "DECEMBER_31": {
    title: "Being of service",
    quote: "Working with others is only the beginning of service work.",
    quote_source: "Basic Text, p 56",
    meditation: "We're in recovery now. Through living the program, we've attained some stability in our lives. Our faith in a Higher Power has grown. Our individual spiritual awakening is progressing comfortably. So now what? Do we simply sit still and enjoy? Of course not. We find a way to be of service.\n\nWe tend to think of service only in terms of committee service or holding a position at some level, but service goes far beyond this understanding. In fact, we can find opportunities to be of service in nearly every area of our lives. Our jobs are a form of service to our communities, no matter what our occupation. The work we do in our homes serves our families. Perhaps we do volunteer work in our communities.\n\nWhat a difference our service efforts make! If we doubt this, we can just imagine what the world would be like if no one bothered to be of service to others. Our work serves humanity. The message we carry goes beyond the rooms of recovery, affecting everything we do.",
    affirmation: "I will look for opportunities to be of service in everything I do."
  }
  // In a real application, all 366 readings would be populated here.
};


// --- Components ---

const Navbar = ({ setCurrentPage, isMobileMenuOpen, toggleMobileMenu }) => {
  const commonLinkClasses = "px-3 py-2 rounded-md text-sm font-medium hover:bg-sky-700 hover:text-white transition-colors duration-150";
  const activeLinkClasses = "bg-sky-900 text-white";
  const inactiveLinkClasses = "text-sky-100";

  const [isStepsOpen, setIsStepsOpen] = React.useState(false);

  const navLinks = [
    { name: "Home", page: "home" },
    { name: "Just for Today", page: "jft" }, // New Link
    { name: "What is NA?", page: "whatIsNA" },
    { name: "The 12 Steps", page: "steps_dropdown", isDropdown: true },
    { name: "The 12 Traditions", page: "traditions" },
    { name: "Recovery & Relapse", page: "recoveryRelapse" },
  ];

  return (
    <nav className="bg-sky-600 shadow-lg">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex items-center justify-between h-20">
          <div className="flex items-center">
            <div className="flex-shrink-0">
              <button onClick={() => setCurrentPage('home')} className="flex items-center space-x-2 text-white">
                <svg className="h-10 w-10" fill="none" viewBox="0 0 100 100" stroke="currentColor">
                  <circle cx="50" cy="50" r="40" strokeWidth="5" />
                  <rect x="30" y="30" width="40" height="40" strokeWidth="5" transform="rotate(45 50 50)" />
                  <text x="50" y="55" textAnchor="middle" fontSize="20" fontWeight="bold" fill="white">NA</text>
                </svg>
                <span className="font-semibold text-xl tracking-tight">NA Resources</span>
              </button>
            </div>
          </div>
          <div className="hidden md:block">
            <div className="ml-10 flex items-baseline space-x-4">
              {navLinks.map((link) => (
                link.isDropdown ? (
                  <div key={link.page} className="relative">
                    <button
                      onClick={() => setIsStepsOpen(!isStepsOpen)}
                      className={`${commonLinkClasses} ${window.location.hash.startsWith('#/step/') ? activeLinkClasses : inactiveLinkClasses} flex items-center`}
                    >
                      {link.name}
                      <svg className={`w-4 h-4 ml-1 transform transition-transform duration-200 ${isStepsOpen ? 'rotate-180' : ''}`} fill="currentColor" viewBox="0 0 20 20"><path fillRule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clipRule="evenodd" /></svg>
                    </button>
                    {isStepsOpen && (
                      <div className="absolute z-10 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none max-h-96 overflow-y-auto">
                        <div className="py-1" role="menu" aria-orientation="vertical" aria-labelledby="options-menu">
                          {stepsData.map(step => (
                            <a
                              key={step.id}
                              href={`#/step/${step.id}`}
                              onClick={(e) => { e.preventDefault(); setCurrentPage(`step/${step.id}`); setIsStepsOpen(false); }}
                              className="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900"
                              role="menuitem"
                            >
                              {step.title}
                            </a>
                          ))}
                        </div>
                      </div>
                    )}
                  </div>
                ) : (
                  <a
                    key={link.page}
                    href={`#/${link.page}`}
                    onClick={(e) => { e.preventDefault(); setCurrentPage(link.page); }}
                    className={`${commonLinkClasses} ${window.location.hash === `#/${link.page}` || (window.location.hash === '' && link.page === 'home') ? activeLinkClasses : inactiveLinkClasses}`}
                  >
                    {link.name}
                  </a>
                )
              ))}
            </div>
          </div>
          <div className="-mr-2 flex md:hidden">
            <button
              onClick={toggleMobileMenu}
              type="button"
              className="bg-sky-700 inline-flex items-center justify-center p-2 rounded-md text-sky-100 hover:text-white hover:bg-sky-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-sky-600 focus:ring-white"
              aria-controls="mobile-menu"
              aria-expanded={isMobileMenuOpen}
            >
              <span className="sr-only">Open main menu</span>
              {!isMobileMenuOpen ? (
                <svg className="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
              ) : (
                <svg className="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
              )}
            </button>
          </div>
        </div>
      </div>

      {isMobileMenuOpen && (
        <div className="md:hidden" id="mobile-menu">
          <div className="px-2 pt-2 pb-3 space-y-1 sm:px-3">
            {navLinks.map((link) => (
              link.isDropdown ? (
                <div key={link.page}>
                  <button
                    onClick={() => setIsStepsOpen(!isStepsOpen)}
                    className={`${commonLinkClasses} ${window.location.hash.startsWith('#/step/') ? activeLinkClasses : inactiveLinkClasses} w-full text-left flex justify-between items-center`}
                  >
                    {link.name}
                    <svg className={`w-4 h-4 ml-1 transform transition-transform duration-200 ${isStepsOpen ? 'rotate-180' : ''}`} fill="currentColor" viewBox="0 0 20 20"><path fillRule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clipRule="evenodd" /></svg>
                  </button>
                  {isStepsOpen && (
                    <div className="pl-4">
                      {stepsData.map(step => (
                        <a
                          key={step.id}
                          href={`#/step/${step.id}`}
                          onClick={(e) => { e.preventDefault(); setCurrentPage(`step/${step.id}`); toggleMobileMenu(); setIsStepsOpen(false); }}
                          className={`${commonLinkClasses} ${inactiveLinkClasses} block`}
                          role="menuitem"
                        >
                          {step.title}
                        </a>
                      ))}
                    </div>
                  )}
                </div>
              ) : (
                <a
                  key={link.page}
                  href={`#/${link.page}`}
                  onClick={(e) => { e.preventDefault(); setCurrentPage(link.page); toggleMobileMenu(); }}
                  className={`${commonLinkClasses} ${window.location.hash === `#/${link.page}` || (window.location.hash === '' && link.page === 'home') ? activeLinkClasses : inactiveLinkClasses} block`}
                >
                  {link.name}
                </a>
              )
            ))}
          </div>
        </div>
      )}
    </nav>
  );
};

const HomePage = ({ setCurrentPage }) => (
  <div className="animate-fadeIn p-6 md:p-10 bg-gradient-to-br from-sky-50 to-indigo-100 min-h-[calc(100vh-5rem)]">
    <header className="text-center mb-12">
      <h1 className="text-5xl font-bold text-sky-700 mb-4">Welcome to Narcotics Anonymous</h1>
      <p className="text-xl text-gray-600">A Journey of Hope and Recovery</p>
    </header>

    <div className="max-w-4xl mx-auto bg-white p-8 rounded-xl shadow-2xl">
      <section className="mb-8">
        <h2 className="text-3xl font-semibold text-sky-800 mb-4">What is NA?</h2>
        <p className="text-gray-700 leading-relaxed mb-4">
          Narcotics Anonymous is a global, community-based organization with a multilingual and multicultural membership. NA was founded in 1953, and our membership growth was minimal during our initial twenty years as an organization. Since the publication of our Basic Text in 1983, the number of members and meetings has increased dramatically.
        </p>
        <p className="text-gray-700 leading-relaxed">
          Today, NA members hold nearly 67,000 meetings weekly in 139 countries. We offer recovery from the effects of addiction through working a twelve-step program, including regular attendance at group meetings. The group atmosphere provides help from peers and offers an ongoing support network for addicts who wish to pursue and maintain a drug-free lifestyle.
        </p>
      </section>

      <section className="mb-8">
        <h2 className="text-3xl font-semibold text-sky-800 mb-4">Our Message</h2>
        <p className="text-gray-700 leading-relaxed mb-4">
          The message of Narcotics Anonymous is simple: An addict, any addict, can stop using drugs, lose the desire to use, and find a new way to live. Our message is one of hope and the promise of freedom from active addiction.
        </p>
        <button
          onClick={() => setCurrentPage('whatIsNA')}
          className="bg-sky-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-sky-700 transition duration-300 shadow-md hover:shadow-lg transform hover:-translate-y-0.5"
        >
          Learn More About NA
        </button>
      </section>

      <section>
        <h2 className="text-3xl font-semibold text-sky-800 mb-6">Explore the 12 Steps</h2>
        <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
          {stepsData.slice(0, 6).map(step => (
            <div key={step.id} className="bg-sky-50 p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300">
              <h3 className="text-xl font-semibold text-sky-700 mb-2">{step.title}</h3>
              <p className="text-gray-600 text-sm mb-3 line-clamp-3">{step.text}</p>
              <button
                onClick={() => setCurrentPage(`step/${step.id}`)}
                className="text-sky-600 hover:text-sky-800 font-medium transition duration-300"
              >
                Read More &rarr;
              </button>
            </div>
          ))}
        </div>
        <div className="text-center mt-8">
          <button
            onClick={() => setCurrentPage('step/1')}
            className="bg-green-600 text-white font-semibold py-3 px-8 rounded-lg hover:bg-green-700 transition duration-300 shadow-md hover:shadow-lg transform hover:-translate-y-0.5"
          >
            View All 12 Steps
          </button>
        </div>
      </section>
    </div>
    <footer className="text-center py-8 mt-12 text-gray-500">
      <div className="mt-8 mb-6">
        <h3 className="text-xl font-semibold text-sky-800 mb-3">Literature</h3>
        <ul className="list-disc list-inside space-y-2 text-gray-600">
          <li><a href="assets/basic-text-sixth-edition.pdf" target="_blank" rel="noopener noreferrer" className="hover:text-sky-700 hover:underline">Basic Text of Narcotics Anonymous (Sixth Edition)</a></li>
          <li><a href="assets/it-works-how-and-why.pdf" target="_blank" rel="noopener noreferrer" className="hover:text-sky-700 hover:underline">It Works How and Why: The Twelve Steps and Twelve Traditions of Narcotics Anonymous</a></li>
          <li><a href="assets/step-working-guide.pdf" target="_blank" rel="noopener noreferrer" className="hover:text-sky-700 hover:underline">The NA Step Working Guides</a></li>
        </ul>
      </div>
      <p>&copy; {new Date().getFullYear()} NA Information Website. Content adapted from NA Fellowship-approved literature.</p>
      <p>Narcotics Anonymous, NA, and the NA Way are registered trademarks of Narcotics Anonymous World Services, Inc.</p>
    </footer>
  </div>
);

const StepPage = ({ stepId }) => {
  const step = stepsData.find(s => s.id === parseInt(stepId));

  if (!step) {
    return <div className="p-6 text-center text-red-500">Step not found.</div>;
  }

  return (
    <div className="animate-fadeIn p-6 md:p-10 bg-sky-50 min-h-[calc(100vh-5rem)]">
      <div className="max-w-4xl mx-auto bg-white p-8 rounded-xl shadow-xl">
        <header className="mb-8 border-b pb-4 border-sky-200">
          <h1 className="text-4xl font-bold text-sky-700 mb-2">{step.title}</h1>
        </header>
        <p className="text-lg italic text-gray-700 mb-6 leading-relaxed p-4 bg-sky-100 rounded-md border-l-4 border-sky-500">{step.text}</p>
        
        <section className="mb-8">
          <h2 className="text-2xl font-semibold text-sky-800 mb-3">Understanding the Step</h2>
          <p className="text-gray-700 leading-relaxed">{step.summary}</p>
        </section>

        <section className="mt-8 pt-6 border-t border-sky-200">
          <h2 className="text-2xl font-semibold text-sky-800 mb-4">In-Depth Exploration</h2>
          <div className="step-html-content" dangerouslySetInnerHTML={{ __html: step.userContentPlaceholder }} />
        </section>
      </div>
    </div>
  );
};

const GeneralPage = ({ pageKey }) => {
  const pageData = generalPagesData[pageKey];

  if (!pageData) {
    return <div className="p-6 text-center text-red-500">Page not found.</div>;
  }

  return (
    <div className="animate-fadeIn p-6 md:p-10 bg-sky-50 min-h-[calc(100vh-5rem)]">
      <div className="max-w-3xl mx-auto bg-white p-8 rounded-xl shadow-xl">
        <header className="mb-8 border-b pb-4 border-sky-200">
          <h1 className="text-4xl font-bold text-sky-700">{pageData.title}</h1>
        </header>
        <div className="prose max-w-none text-gray-700 leading-relaxed" dangerouslySetInnerHTML={{ __html: pageData.content }}></div>
      </div>
    </div>
  );
};

// --- New JFT Page Component ---
const JFTPage = () => {
  const [todayReading, setTodayReading] = React.useState(null);
  const [currentDateDisplay, setCurrentDateDisplay] = React.useState("");

  React.useEffect(() => {
    const now = new Date();
    const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
    const month = monthNames[now.getMonth()];
    const day = now.getDate();
    
    setCurrentDateDisplay(`${month} ${day}`);

    const readingKey = `${month.toUpperCase()}_${day}`;
    const reading = jftReadingsData[readingKey];

    if (reading) {
      setTodayReading(reading);
    } else {
      // Fallback for dates not in the sample data or Feb 29 on non-leap year
      // In a full implementation, you'd have all data or better fallback.
      // For Feb 29 on non-leap year, could show Feb 28.
      // For this example, if current date is Feb 29 and it's not a leap year, it will show "No reading..."
      // A more robust solution would check if it's a leap year.
      // For now, we just check if the key exists.
      const isLeap = (year) => (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;
      if (month === "February" && day === 29 && !isLeap(now.getFullYear())) {
         const feb28Key = "FEBRUARY_28"; // Fallback to Feb 28
         setTodayReading(jftReadingsData[feb28Key]);
         setCurrentDateDisplay(`February 28 (showing for non-leap year)`);
      } else {
        setTodayReading({
          title: "No Reading Available",
          meditation: "The reading for today is not available in this sample data. A full version would include all 366 daily meditations.",
          affirmation: "Check back tomorrow or ensure all readings are loaded."
        });
      }
    }
  }, []);

  if (!todayReading) {
    return (
      <div className="animate-fadeIn p-6 md:p-10 bg-sky-50 min-h-[calc(100vh-5rem)]">
        <div className="max-w-3xl mx-auto text-center py-10">
          <p className="text-xl text-gray-700">Loading today's reading...</p>
        </div>
      </div>
    );
  }

  // Split meditation text into paragraphs for better display
  const meditationParagraphs = todayReading.meditation ? todayReading.meditation.split('\n\n').map((p, i) => <p key={i}>{p}</p>) : null;


  return (
    <div className="animate-fadeIn p-6 md:p-10 bg-sky-50 min-h-[calc(100vh-5rem)]">
      <div className="max-w-3xl mx-auto">
        <header className="text-center mb-8">
          <h1 className="text-4xl font-bold text-sky-700">Just for Today</h1>
        </header>
        <div className="jft-card">
          <div className="jft-date">{currentDateDisplay}</div>
          <h2 className="jft-title">{todayReading.title}</h2>
          {todayReading.quote && (
            <blockquote className="jft-quote">
              {todayReading.quote}
              {todayReading.quote_source && <span className="jft-quote-source">{todayReading.quote_source}</span>}
            </blockquote>
          )}
          <div className="jft-meditation">
            {meditationParagraphs}
          </div>
          {todayReading.affirmation && (
            <div className="jft-affirmation">
              <strong>Just for today:</strong> {todayReading.affirmation}
            </div>
          )}
        </div>
      </div>
    </div>
  );
};


// --- Main App Component ---
const App = () => {
  const [currentPage, setCurrentPage] = React.useState('home');
  const [isMobileMenuOpen, setIsMobileMenuOpen] = React.useState(false);

  React.useEffect(() => {
    const handleHashChange = () => {
      const hash = window.location.hash.replace(/^#\/?|\/$/g, ''); 
      if (hash.startsWith('step/')) {
        setCurrentPage(hash);
      } else if (['home', 'jft', 'whatIsNA', 'traditions', 'recoveryRelapse'].includes(hash)) {
        setCurrentPage(hash);
      } else if (!hash) {
        setCurrentPage('home'); 
      }
    };

    window.addEventListener('hashchange', handleHashChange);
    handleHashChange(); // Call on initial load

    return () => {
      window.removeEventListener('hashchange', handleHashChange);
    };
  }, []);

  const setPageAndUpdateHash = (page) => {
    setCurrentPage(page);
    window.location.hash = `/${page}`; // Update hash for navigation
    setIsMobileMenuOpen(false); // Close mobile menu on navigation
  };
  const toggleMobileMenu = () => setIsMobileMenuOpen(!isMobileMenuOpen);

  let pageContent;
  if (currentPage.startsWith('step/')) {
    const stepId = currentPage.split('/')[1];
    pageContent = <StepPage stepId={stepId} />;
  } else {
    switch (currentPage) {
      case 'home':
        pageContent = <HomePage setCurrentPage={setPageAndUpdateHash} />;
        break;
      case 'jft': // New case for JFT page
        pageContent = <JFTPage />;
        break;
      case 'whatIsNA':
        pageContent = <GeneralPage pageKey="whatIsNA" />;
        break;
      case 'traditions':
        pageContent = <GeneralPage pageKey="traditions" />;
        break;
      case 'recoveryRelapse':
        pageContent = <GeneralPage pageKey="recoveryRelapse" />;
        break;
      default:
        pageContent = <HomePage setCurrentPage={setPageAndUpdateHash} />;
    }
  }

  return (
    <div className="font-sans bg-gray-100">
      <Navbar setCurrentPage={setPageAndUpdateHash} isMobileMenuOpen={isMobileMenuOpen} toggleMobileMenu={toggleMobileMenu} />
      <main>
        {pageContent}
      </main>
    </div>
  );
};

ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
